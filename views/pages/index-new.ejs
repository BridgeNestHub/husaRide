<!DOCTYPE html>
<html lang="en">
<%- include('../partials/head') %>
<body>
    <%- include('../partials/nav') %>

    <section id="homepage-main" class="main-landing-area">
        <div class="landing-wrapper">
            <div class="content-area">
                <h1>Ride With Comfort & Safety</h1>
                <p class="tagline-text">Book a ride in seconds and enjoy the journey</p>
                <div class="ride-booking-container" id="rideBookingContainer">
                    <div class="form-field">
                        <i class="fas fa-user"></i>
                        <input type="text" id="customerName" placeholder="Full Name *" required>
                    </div>
                    <div class="form-field">
                        <i class="fas fa-envelope"></i>
                        <input type="email" id="customerEmail" placeholder="Email Address *" required>
                    </div>
                    <div class="form-field">
                        <i class="fas fa-phone"></i>
                        <input type="tel" id="customerPhone" placeholder="Phone Number *" required>
                    </div>
                    <div class="form-field">
                        <i class="fas fa-map-marker-alt"></i>
                        <input type="text" id="startLocation" placeholder="Pickup Location *" required>
                    </div>
                    <div class="form-field">
                        <i class="fas fa-flag-checkered"></i>
                        <input type="text" id="endLocation" placeholder="Drop-off Location *" required>
                    </div>
                    <div class="form-field">
                        <i class="fas fa-car"></i>
                        <select id="carType" required>
                            <option value="">Select Vehicle Type *</option>
                            <option value="limo">Luxury Limo - $2.50/mi + $1.25/hr</option>
                            <option value="comfort" selected>Comfort Electric - $1.80/mi + $0.90/hr</option>
                            <option value="suv">Premium SUV - $3.20/mi + $1.60/hr</option>
                            <option value="van">Luxury Van - $4.50/mi + $2.25/hr</option>
                            <option value="wedding">Wedding Package - $8.00/mi + $4.00/hr</option>
                            <option value="bus">Event Bus - $6.00/mi + $3.00/hr</option>
                            <option value="convention">Convention Transport - $5.50/mi + $2.75/hr</option>
                            <option value="sports">Sports Events - $4.80/mi + $2.40/hr</option>
                            <option value="theme">Theme Parks - $3.80/mi + $1.90/hr</option>
                            <option value="concert">Concert Transport - $4.20/mi + $2.10/hr</option>
                        </select>
                    </div>
                    <div class="price-estimate">
                        <span class="price-label">Estimated Fare:</span>
                        <span id="calculatedFare" class="price-value">$0.00</span>
                    </div>
                    <button id="submitBooking" class="booking-submit-btn">Book Now</button>
                </div>
            </div>
            <div class="image-area">
                <img data-src="/images/limo.jpg" alt="Ride hailing car" class="lazy-image no-lazy">
                
                <!-- User Profile Section -->
                <div id="profileDisplay" class="profile-display-area" style="display: none;">
                    <div class="profile-info-card">
                        <div class="profile-top">
                            <div class="user-details">
                                <h3 id="userName">Welcome back!</h3>
                                <p id="userPoints">0 points earned</p>
                            </div>
                            <button id="showAllRides" class="rides-view-btn">View All Rides</button>
                        </div>
                        <div class="trip-history">
                            <h4>Recent Trips</h4>
                            <div id="tripsList" class="trips-container">
                                <p class="empty-trips">No recent trips</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <main>
        <!-- Services Section -->
        <section id="transport-services" class="transport-services-area">
            <h2>Complete Transportation Solutions</h2>
            <div class="services-layout">
                <div class="service-group">
                    <h3><i class="fas fa-car"></i> Personal Transport</h3>
                    <div class="vehicles-row">
                        <div class="vehicle-option" data-type="limo">
                            <img data-src="/images/limo.jpg" alt="Luxury Limousine" class="lazy-image">
                            <div class="vehicle-details">
                                <h4>Luxury Limousine</h4>
                                <p>Premium comfort for special occasions</p>
                                <div class="vehicle-specs">
                                    <span class="passenger-count"><i class="fas fa-users"></i> Up to 8 passengers</span>
                                    <span class="rate-info">$2.50/mi </span>
                                </div>
                                <button class="choose-vehicle-btn" data-vehicle="limo">Select This Option</button>
                            </div>
                        </div>
                        <div class="vehicle-option" data-type="comfort">
                            <img data-src="/images/teslaComfort.jpg" alt="Comfort Electric" class="lazy-image">
                            <div class="vehicle-details">
                                <h4>Comfort Electric</h4>
                                <p>Eco-friendly and comfortable rides</p>
                                <div class="vehicle-specs">
                                    <span class="passenger-count"><i class="fas fa-users"></i> Up to 4 passengers</span>
                                    <span class="rate-info">$1.80/mi</span>
                                </div>
                                <button class="choose-vehicle-btn" data-vehicle="comfort">Select This Option</button>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="service-group">
                    <h3><i class="fas fa-users"></i> Group Transport</h3>
                    <div class="vehicles-row">
                        <div class="vehicle-option" data-type="suv">
                            <img data-src="/images/premiumsuv.jpg" alt="Premium SUV" class="lazy-image">
                            <div class="vehicle-details">
                                <h4>Premium SUV</h4>
                                <p>Spacious and powerful for any journey</p>
                                <div class="vehicle-specs">
                                    <span class="passenger-count"><i class="fas fa-users"></i> Up to 5 passengers</span>
                                    <span class="rate-info">$3.20/mi</span>
                                </div>
                                <button class="choose-vehicle-btn" data-vehicle="suv">Select This Option</button>
                            </div>
                        </div>
                        <div class="vehicle-option" data-type="van">
                            <img data-src="/images/sprintervan.jpg" alt="Luxury Van" class="lazy-image">
                            <div class="vehicle-details">
                                <h4>Luxury Van</h4>
                                <p>Perfect for group travel and events</p>
                                <div class="vehicle-specs">
                                    <span class="passenger-count"><i class="fas fa-users"></i> Up to 10 passengers</span>
                                    <span class="rate-info">$4.50/mi</span>
                                </div>
                                <button class="choose-vehicle-btn" data-vehicle="van">Select This Option</button>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="service-group">
                    <h3><i class="fas fa-heart"></i> Special Events</h3>
                    <div class="special-vehicles-row">
                        <div class="vehicle-option" data-type="wedding">
                            <img data-src="/images/weddinglimo.jpg" alt="Wedding Car" class="lazy-image">
                            <div class="vehicle-details">
                                <h4>Wedding Package</h4>
                                <p>Luxury vehicles for your special day</p>
                                <div class="vehicle-specs">
                                    <span class="passenger-count"><i class="fas fa-heart"></i> Special occasion</span>
                                    <span class="rate-info">$8.00/mi</span>
                                </div>
                                <button class="choose-vehicle-btn" data-vehicle="wedding">Select This Option</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Fleet Section -->
        <section class="fleet-showcase">
            <h2>Our Premium Fleet</h2>
            <p>Experience luxury and comfort with our carefully selected vehicles</p>
            <div class="fleet-display">
                <div class="fleet-vehicle">
                    <img data-src="/images/limo.jpg" alt="Luxury Limousine" class="lazy-image">
                    <div class="fleet-info">
                        <h3>Luxury Limousines</h3>
                        <p>Perfect for special occasions and VIP transport</p>
                        <span class="fleet-capacity">Up to 8 passengers</span>
                    </div>
                </div>
                <div class="fleet-vehicle">
                    <img data-src="/images/teslaComfort.jpg" alt="Electric Vehicles" class="lazy-image">
                    <div class="fleet-info">
                        <h3>Electric Vehicles</h3>
                        <p>Eco-friendly transportation without compromising comfort</p>
                        <span class="fleet-capacity">Up to 4 passengers</span>
                    </div>
                </div>
                <div class="fleet-vehicle">
                    <img data-src="/images/premiumsuv.jpg" alt="Premium SUVs" class="lazy-image">
                    <div class="fleet-info">
                        <h3>Premium SUVs</h3>
                        <p>Spacious and powerful for family trips and group travel</p>
                        <span class="fleet-capacity">Up to 7 passengers</span>
                    </div>
                </div>
            </div>
        </section>

        <!-- Features Section -->
        <section class="platform-features">
            <h2>Why Choose HusaRide</h2>
            <div class="features-display">
                <div class="feature-item">
                    <i class="fas fa-shield-alt"></i>
                    <h3>Safe & Secure</h3>
                    <p>All drivers are background checked and vehicles are regularly inspected</p>
                </div>
                <div class="feature-item">
                    <i class="fas fa-clock"></i>
                    <h3>24/7 Service</h3>
                    <p>Available round the clock for all your transportation needs</p>
                </div>
                <div class="feature-item">
                    <i class="fas fa-star"></i>
                    <h3>Premium Quality</h3>
                    <p>Luxury vehicles and professional drivers for the best experience</p>
                </div>
                <div class="feature-item">
                    <i class="fas fa-mobile-alt"></i>
                    <h3>Easy Booking</h3>
                    <p>Simple online booking process with instant confirmation</p>
                </div>
            </div>
        </section>
    </main>

    <%- include('../partials/footer') %>
    <%- include('../partials/auth-modals') %>

    <!-- Vehicle Booking Modal -->
    <div id="vehicleBookingModal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2>Book Your Ride</h2>
            <div id="selectedVehicleInfo" class="selected-vehicle-info"></div>
            <form id="vehicleBookingForm">
                <div class="form-group">
                    <label for="bookingName">Full Name *</label>
                    <input type="text" id="bookingName" name="fullName" required>
                </div>
                <div class="form-group">
                    <label for="bookingEmail">Email Address *</label>
                    <input type="email" id="bookingEmail" name="email" required>
                </div>
                <div class="form-group">
                    <label for="bookingPhone">Phone Number *</label>
                    <input type="tel" id="bookingPhone" name="phone" required>
                </div>
                <div class="form-group">
                    <label for="bookingPickup">Pickup Location *</label>
                    <input type="text" id="bookingPickup" name="pickupLocation" required>
                </div>
                <div class="form-group">
                    <label for="bookingDropoff">Drop-off Location *</label>
                    <input type="text" id="bookingDropoff" name="dropoffLocation" required>
                </div>
                <div class="form-group">
                    <label for="bookingDate">Date & Time *</label>
                    <input type="datetime-local" id="bookingDate" name="bookingDate" required>
                </div>
                <div class="form-group">
                    <label for="bookingPassengers">Number of Passengers *</label>
                    <select id="bookingPassengers" name="passengers" required>
                        <option value="">Select passengers</option>
                        <option value="1">1 passenger</option>
                        <option value="2">2 passengers</option>
                        <option value="3">3 passengers</option>
                        <option value="4">4 passengers</option>
                        <option value="5">5 passengers</option>
                        <option value="6">6 passengers</option>
                        <option value="7">7 passengers</option>
                        <option value="8">8 passengers</option>
                        <option value="9">9 passengers</option>
                        <option value="10">10+ passengers</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="bookingNotes">Special Requests (Optional)</label>
                    <textarea id="bookingNotes" name="notes" rows="3" placeholder="Any special requests or notes..."></textarea>
                </div>
                <div class="estimated-fare">
                    <p>Estimated Fare: <span id="estimatedFare">$0.00</span></p>
                </div>
                <button type="submit" class="book-ride-btn">Confirm Booking</button>
            </form>
        </div>
    </div>

    <!-- Rides Modal -->
    <div id="ridesModal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2>Your Rides</h2>
            <div id="ridesContainer" class="rides-list">
                <p style="text-align: center;">Loading rides...</p>
            </div>
        </div>
    </div>

    <!-- Settings Modal -->
    <div id="settingsModal" class="modal modal-overlay">
        <div class="modern-settings-modal">
            <div class="modal-header-modern">
                <h2><i class="fas fa-cog"></i> Settings</h2>
                <button class="modern-close">&times;</button>
            </div>
            <div class="settings-tabs-modern">
                <button class="tab-btn-modern active" data-tab="account">
                    <i class="fas fa-user"></i>
                    <span>Account</span>
                </button>
                <button class="tab-btn-modern" data-tab="notifications">
                    <i class="fas fa-bell"></i>
                    <span>Notifications</span>
                </button>
                <button class="tab-btn-modern" data-tab="locations">
                    <i class="fas fa-map-marker-alt"></i>
                    <span>Locations</span>
                </button>
                <button class="tab-btn-modern" data-tab="emergency">
                    <i class="fas fa-phone"></i>
                    <span>Emergency</span>
                </button>
            </div>
            <div class="tab-content-modern active" id="accountTab">
                <div class="settings-section">
                    <h3><i class="fas fa-key"></i> Change Password</h3>
                    <p class="section-description">Update your account password for security</p>
                    <form id="passwordResetForm" class="modern-form">
                        <div class="form-group-modern">
                            <label class="modern-label">Current Password</label>
                            <input type="password" name="currentPassword" class="modern-input" required>
                        </div>
                        <div class="form-row">
                            <div class="form-group-modern">
                                <label class="modern-label">New Password</label>
                                <input type="password" name="newPassword" class="modern-input" required>
                            </div>
                            <div class="form-group-modern">
                                <label class="modern-label">Confirm Password</label>
                                <input type="password" name="confirmPassword" class="modern-input" required>
                            </div>
                        </div>
                        <button type="submit" class="modern-btn primary">Update Password</button>
                    </form>
                </div>
            </div>
            <div class="tab-content-modern" id="notificationsTab">
                <div class="settings-section">
                    <h3><i class="fas fa-bell"></i> Notification Preferences</h3>
                    <p class="section-description">Choose how you want to receive updates</p>
                    <form id="notificationsForm" class="modern-form">
                        <div class="toggle-group">
                            <div class="toggle-item">
                                <div class="toggle-info">
                                    <h4>Email Notifications</h4>
                                    <p>Receive ride updates via email</p>
                                </div>
                                <label class="toggle-switch">
                                    <input type="checkbox" name="email" checked>
                                    <span class="slider"></span>
                                </label>
                            </div>
                            <div class="toggle-item">
                                <div class="toggle-info">
                                    <h4>SMS Notifications</h4>
                                    <p>Get text messages for important updates</p>
                                </div>
                                <label class="toggle-switch">
                                    <input type="checkbox" name="sms">
                                    <span class="slider"></span>
                                </label>
                            </div>
                            <div class="toggle-item">
                                <div class="toggle-info">
                                    <h4>Push Notifications</h4>
                                    <p>Browser notifications for real-time updates</p>
                                </div>
                                <label class="toggle-switch">
                                    <input type="checkbox" name="push">
                                    <span class="slider"></span>
                                </label>
                            </div>
                        </div>
                        <button type="submit" class="modern-btn primary">Save Preferences</button>
                    </form>
                </div>
            </div>
            <div class="tab-content-modern" id="locationsTab">
                <div class="settings-section">
                    <h3><i class="fas fa-map-marker-alt"></i> Favorite Locations</h3>
                    <p class="section-description">Save frequently used addresses</p>
                    <div id="favoriteLocationsList" class="locations-list"></div>
                    <div class="add-section">
                        <h4>Add New Location</h4>
                        <form id="addLocationForm" class="modern-form">
                            <div class="form-row">
                                <div class="form-group-modern">
                                    <label class="modern-label">Location Name</label>
                                    <input type="text" name="name" class="modern-input" placeholder="e.g., Home, Work" required>
                                </div>
                                <div class="form-group-modern">
                                    <label class="modern-label">Type</label>
                                    <select name="type" class="modern-select" required>
                                        <option value="home">Home</option>
                                        <option value="work">Work</option>
                                        <option value="other">Other</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group-modern">
                                <label class="modern-label">Address</label>
                                <input type="text" name="address" class="modern-input" placeholder="Full address" required>
                            </div>
                            <button type="submit" class="modern-btn secondary">Add Location</button>
                        </form>
                    </div>
                </div>
            </div>
            <div class="tab-content-modern" id="emergencyTab">
                <div class="settings-section">
                    <h3><i class="fas fa-phone"></i> Emergency Contacts</h3>
                    <p class="section-description">People to contact in case of emergency</p>
                    <div id="emergencyContactsList" class="contacts-list"></div>
                    <div class="add-section">
                        <h4>Add Emergency Contact</h4>
                        <form id="addEmergencyForm" class="modern-form">
                            <div class="form-row">
                                <div class="form-group-modern">
                                    <label class="modern-label">Name</label>
                                    <input type="text" name="name" class="modern-input" required>
                                </div>
                                <div class="form-group-modern">
                                    <label class="modern-label">Relationship</label>
                                    <select name="relationship" class="modern-select" required>
                                        <option value="spouse">Spouse</option>
                                        <option value="parent">Parent</option>
                                        <option value="sibling">Sibling</option>
                                        <option value="friend">Friend</option>
                                        <option value="other">Other</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group-modern">
                                <label class="modern-label">Phone Number</label>
                                <input type="tel" name="phone" class="modern-input" required>
                            </div>
                            <button type="submit" class="modern-btn secondary">Add Contact</button>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="/js/main.js"></script>
    <script>
        // Update the main.js to work with new IDs
        document.addEventListener('DOMContentLoaded', function() {
            // Map new IDs to old functionality
            const idMappings = {
                'heroFullName': 'customerName',
                'heroEmail': 'customerEmail', 
                'heroPhone': 'customerPhone',
                'heroPickup': 'startLocation',
                'heroDropoff': 'endLocation',
                'heroVehicleType': 'carType',
                'heroEstimatedFare': 'calculatedFare',
                'heroBookNowBtn': 'submitBooking',
                'bookingForm': 'rideBookingContainer',
                'userProfileSection': 'profileDisplay',
                'profileName': 'userName',
                'profilePoints': 'userPoints',
                'recentRidesList': 'tripsList',
                'viewAllRidesBtn': 'showAllRides'
            };
            
            // Update main.js references
            Object.keys(idMappings).forEach(oldId => {
                const newId = idMappings[oldId];
                const element = document.getElementById(newId);
                if (element && !document.getElementById(oldId)) {
                    element.id = oldId;
                    element.setAttribute('data-original-id', newId);
                }
            });
            
            // Update vehicle selection buttons
            document.querySelectorAll('.choose-vehicle-btn').forEach(btn => {
                btn.classList.add('select-vehicle-btn');
            });
        });
    </script>
</body>
</html>